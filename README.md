# RecSleep

睡眠時間を記録するスマートフォン専用Webアプリケーション。

## 特徴

- 📱 スマートフォン専用に最適化されたUI
- 💤 昼寝を含む1日複数回の睡眠記録に対応
- 📊 週次・月次の積層グラフで睡眠パターンを可視化（日をまたぐ睡眠は自動的に各日に分割）
- 💾 ローカルストレージでデータを保存（オフライン動作可能）
- 📥 CSV形式でデータをエクスポート可能
- ✏️ 過去の記録を編集・削除可能

## 機能

### 睡眠記録
- 睡眠開始日時を選択（過去7日まで、デフォルトは前日の22:00）
- 睡眠時間を5分単位で選択
- 22時以降～7時までの睡眠は自動的に「夜の睡眠」として分類
- それ以外は「昼の睡眠」として分類
- 日をまたぐ睡眠は各日に自動的に分割される（例：11/6 22:00に6時間睡眠 → 11/6に2時間 + 11/7に4時間）

### グラフ表示
- 週次グラフ：過去7日間の睡眠時間を積層グラフで表示
- 月次グラフ：過去30日間の睡眠時間を積層グラフで表示
- 夜の睡眠：濃い青色で表示
- 昼の睡眠：オレンジ色で表示

### 履歴管理
- メイン画面右上の「履歴」リンクから履歴画面へ遷移
- 過去の記録をコンパクトなテーブル形式で表示
- ラジオボタンで記録を選択し、ヘッダーの「編集」ボタンで編集
- 編集モーダルで記録の修正・削除が可能
- 削除時は確認ダイアログが表示される
- 日付ごとにグループ化して表示

### データエクスポート
- 履歴画面上部の「CSV出力」ボタンからダウンロード
- CSV形式で全記録をエクスポート
- Excel等で開ける形式（UTF-8 BOM付き）

## 使用方法

1. `index.html`をブラウザで開く
2. フォームから睡眠開始日時と睡眠時間を選択（デフォルトで前日22:00が設定されています）
3. 「記録する」ボタンをクリック
4. グラフで記録を確認
5. 「履歴」リンクから過去の記録を確認・編集・削除・CSV出力が可能

## 技術スタック

- HTML5 / CSS3 / JavaScript (ES6+)
- Chart.js（グラフ描画）
- LocalStorage API（データ保存）

## ファイル構成

```
RecSleep/
├── index.html              # メイン画面
├── history.html            # 過去記録一覧画面
├── css/
│   ├── style.css           # 基本スタイル
│   ├── components.css      # UIコンポーネントスタイル
│   └── history.css         # 過去記録画面スタイル
├── js/
│   ├── app.js              # アプリケーションエントリーポイント
│   ├── data.js             # データ管理（LocalStorage操作）
│   ├── validator.js        # バリデーションロジック
│   ├── sleepType.js        # 睡眠種類判定ロジック
│   ├── chart.js            # グラフ描画ロジック
│   ├── export.js           # CSVエクスポート機能
│   ├── ui.js               # UI制御ロジック
│   └── history.js          # 過去記録画面ロジック
└── docs/
    ├── requirements.md     # 要件定義書
    └── design.md           # 設計書
```

## デプロイ

GitHub Pagesで動作確認済み。

1. リポジトリをGitHubにプッシュ
2. リポジトリの設定からGitHub Pagesを有効化
3. `index.html`をルートに配置

## ライセンス

MIT License
